//CONSTANTES GLOBALES DE ADOBE
const PAGE_PCID=e=>{switch(e){case"BCP Online":return"bcp-online";case"Abrir Cuenta BCP":return"abrir-cuenta";default:return"home"}};function obtenerGroup(e){return e.split("|")[0].trim()}
//FUNCIóN QUE ELIMINA TILDE Y CARACTERES EXTRAÑOS
function cleanLabel(e,t=0){if(e){
//Variables
let a=0,r=e;const o=[/¿|¡/g,/[\u0021-\u002C]/g,/[\u002E-\u002F]/g,/[\u003A-\u0040]/g],n=[{r1:/ñ/g,r2:"ni"},{r1:"y/o",r2:"zoz"}],l=["de","la","un","una","por","a","mi","mis","y","que","o","te","son","las","en","el","tu","tus","al","del","y/o","con","los","sin"];//Elimina el espacio con codigo HTML
//Procesando String
return r=r.replace(/&nbsp;/g," "),/ /.test(e)?(0!=t&&(r=r.substr(0,t).trim()),r=r.toLocaleLowerCase(),n.forEach((e=>{r=r.replace(e.r1,e.r2)})),//Reemplazando valores
o.forEach((e=>{r=r.replace(e,"")})),//Eliminando simbolos
r=r.normalize("NFD").replace(/[\u0300-\u036f]/g,""),//Elimina Tildes
r=r.replace(n[1].r2,n[1].r1),//Retornar algunos valores reemplazados
r=r.trim().replace(/\w\S*/g,(
//Funciones
function(e){return 0==a?e=e.replace(/^\w/,(e=>e.toUpperCase())):-1!=l.indexOf(e)||(e=e.replace(/^\w/,(e=>e.toUpperCase()))),a++,e})),r):(0!=t&&(r=r.substr(0,t).trim()),n.forEach((e=>{r=r.replace(e.r1,e.r2)})),//Reemplazando valores
o.forEach((e=>{r=r.replace(e,"")})),//Eliminando simbolos
r=r.normalize("NFD").replace(/[\u0300-\u036f]/g,""),//Elimina Tildes
r=r.replace(n[1].r2,n[1].r1),//Retornar algunos valores reemplazados
r=r.replace(/^\w/,(e=>e.toUpperCase())),r)}console.log("cleanLabel => Hubo problemas al formatear el texto")}
//FUNCIóN QUE AGREGA PARAMETROS GET PARA TAGGEO ADOBE
function agregarParemetrosGet(e,t,a="Sin info",r="attr-href"){try{if(e&&t){const o="BUTTON"!=e.tagName?"href":r,n=e.getAttribute(o),l=(e,t)=>{let a=!0;const r=["Ya existe un pcid ó rfid en el enlace","href es null"];return e?[/rfid/i,/pcid/i].forEach((o=>{e.search(o)>=0&&(a=!1,mostrarMensajeConsola("A",`${r[0]} (${t}) `))})):(a=!1,mostrarMensajeConsola("A",`${r[1]} (${t}) `)),a};if(l(n,a)){t=t.toLowerCase();const a=n.trim(),r=a.indexOf("?")>=0?"&":"?";if("https://www.proyectosinmobiliariosbcp.com/"!==a){const n=`${a}${r}${t}`;e.setAttribute(o,n)}}}else mostrarMensajeConsola("A",`agregarParemetrosGet=>(${e},${t}) Valores enviados en null o undefined (${a})`)}catch(e){console.log(e)}}
//FUNCIÓN ELIMINA TILDE Y ESPACIO EN BLANCO
function prepareString(e,t="Sin Info",a=30){if("string"==typeof e){if(e.length>0){let t=e.toLocaleLowerCase().trim();const r={exprInit:/ñ/g,changeInit:"ni"},o=[/¿|¡/g,/[\u002D]/g,/[\u0021-\u002F]/g,/[\u003A-\u0040]/g],n=e=>"-"==e.slice(-1)?e.substr(0,e.length-1):e;//Reemplazo espacio en blanco con guión
return t=t.replace(/&nbsp;/g," "),//Elimina el espacio con codigo HTML
t=n(t.substr(0,a)),o.forEach((e=>{t=t.replace(e,"")})),//Buscando simbolos para eliminarlos
t=t.replace(r.exprInit,r.changeInit),//Reemplazo la ñ
t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,""),//Elimina tildes
t=t.replace(/  /g," "),t=t.replace(/ /g,"-"),t}mostrarMensajeConsola("A",`prepareString => el string esta vacio.(${t})`)}else mostrarMensajeConsola("A",`prepareString => No es un string.(${t})`)}function validarDataTGAB(e,t){let a=!0;const r=["null","undefined"],o=(e,t)=>{a=!1,mostrarMensajeConsola("E",`El valor de ${e} es ${t}`)};return void 0!==e?null===e&&o(t,r[0]):o(t,r[1]),a}function mostrarMensajeConsola(e,t){const a=[["Error:","background: #ff6961; color: white;"],["Advertencia:","background: #fdfd96; color: #505050;"],["Completado:","background: #77dd77; color: #505050;"]];"E"===e?console.log(`%c ${a[0][0]} ${t} `,a[0][1]):"A"===e?console.log(`%c ${a[1][0]} ${t} `,a[1][1]):console.log(`%c ${a[2][0]} ${t} `,a[2][1])}function eventPushTGAB(e,t){switch(e){case"A":digitalData.push({action:t,event:"trackAction"});break;case"F":digitalData.push({flow:t,event:"trackFlow"});break;case"E":digitalData.push({element:t,event:"trackElement"});break;case"ER":digitalData.push({form:t,event:"trackFormError"});break;case"M":digitalData.push({metadata:t,event:"trackMetadata"});break;case"P":digitalData.push({popup:t,event:"trackPopup"});break;case"S":digitalData.push({form:t,event:"trackFormSubmit"});break;case"V":digitalData.push({form:t,event:"trackFormView"});break;default:mostrarMensajeConsola("E",`eventPushTGAB => (${e}) parametro enviado no encontrado`)}}function urlUTMTGAB(){let e="";const t=[/¿|¡/g,/[\u0021-\u002C]/g,/[\u002E-\u002F]/g,/[\u003A-\u0040]/g];//Eliminando simbolos
let a=window.location.pathname;a=a.replace("/","");const r=a.split("/");var o;return(o=r).forEach(((a,r)=>{var n;e+=`${n=a,t.forEach((e=>{n=n.replace(e,"")})),n.trim()}${r!=o.length-1?"-":""}`})),e}function titleUTMTGAB(e="UTM"){const t=document.title,a=-1!=t.search(/\u007C/)?t.split("|")[0]:t;return"UTM"==e?prepareString(a):cleanLabel(a)}function TGABTaggeoForm(e="vacio",t="submit"){try{if(e){const a="submit"==t?"trackFormSubmit":"trackFormError";let r=titleUTMTGAB("LABEL");"vacio"!=e&&(r=document.getElementById(e)?document.getElementById(e).getAttribute("nomproducto"):titleUTMTGAB("LABEL")),digitalData.push({form:{channel:"ViaBCP",name:cleanLabel(r),version:"",product:""},event:a})}else mostrarMensajeConsola("A","Verificar los parametros de TGABTaggeoForm")}catch(e){console.log(e.message)}}class TaggeoAdobeV1{constructor(e,t){this.contenedor=e,this.label=t.label,this.data=t.data,this.event=t.event?t.event:"trackAction"}init(){Object.keys(this.data).length&&this.contenedor.length>0?this.contenedor.forEach((e=>{document.querySelectorAll(e).forEach((e=>{this.taggear(e)})),console.log(`Se agregó taggeo ${this.event}`)})):console.log("No se encontro el contenedor")}armarData(e){let t=this.data,a=[],r=null;return this.label.forEach((t=>{if("string"==typeof t)0==t.length?a.push(cleanLabel(e.innerText)):"."==t[0]?a.push(cleanLabel(e.querySelector(t)?.innerText)):a.push(t);else{const r=this.subirNodos(e,t.nivel);a.push(cleanLabel(r.querySelector(t.clase)?.innerText))}})),r=a.includes(void 0)?null:a.toString().replace(/\u002c/g," - "),r?t.label=r:t=null,t}taggear(e){e.addEventListener("click",(e=>{console.log(this.data);const t=e.currentTarget,a=this.label?this.armarData(t):this.data;a?(console.log(a),digitalData.push({action:a,event:this.event})):console.log("Hubo un error al generar la data")}))}subirNodos(e,t){let a=e;for(let e=0;e<t;e++)a=a.parentNode;return a}}